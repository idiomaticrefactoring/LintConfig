{
  "name": "abseil-time-subtraction",
  "meta": {
    "url": "https://clang.llvm.org/extra/clang-tidy/checks/abseil/time-subtraction.html",
    "fixable": true
  },
  "content": {
    "introduction": "Finds and fixes \nabsl::Time\n subtraction expressions to do subtraction\nin the Time domain instead of the numeric domain.\n\nThere are two cases of Time subtraction in which deduce additional type\ninformation:\n\nWhen the result is an \nabsl::Duration\n and the first argument is an\n\nabsl::Time\n.\n\n\nWhen the second argument is a \nabsl::Time\n.\n\nIn the first case, we must know the result of the operation, since without that\nthe second operand could be either an \nabsl::Time\n or an \nabsl::Duration\n.\nIn the second case, the first operand \nmust\n be an \nabsl::Time\n, because\nsubtracting an \nabsl::Time\n from an \nabsl::Duration\n is not defined.\n\nExamples:\n\nint\n \nx\n;\n\n\nabsl\n::\nTime\n \nt\n;\n\n\n\n// Original - absl::Duration result and first operand is an absl::Time.\n\n\nabsl\n::\nDuration\n \nd\n \n=\n \nabsl\n::\nSeconds\n(\nabsl\n::\nToUnixSeconds\n(\nt\n)\n \n-\n \nx\n);\n\n\n\n// Suggestion - Perform subtraction in the Time domain instead.\n\n\nabsl\n::\nDuration\n \nd\n \n=\n \nt\n \n-\n \nabsl\n::\nFromUnixSeconds\n(\nx\n);\n\n\n\n\n// Original - Second operand is an absl::Time.\n\n\nint\n \ni\n \n=\n \nx\n \n-\n \nabsl\n::\nToUnixSeconds\n(\nt\n);\n\n\n\n// Suggestion - Perform subtraction in the Time domain instead.\n\n\nint\n \ni\n \n=\n \nabsl\n::\nToInt64Seconds\n(\nabsl\n::\nFromUnixSeconds\n(\nx\n)\n \n-\n \nt\n);",
    "configurations": []
  }
}