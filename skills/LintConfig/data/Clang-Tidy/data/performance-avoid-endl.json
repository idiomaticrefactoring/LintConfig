{
  "name": "performance-avoid-endl",
  "meta": {
    "url": "https://clang.llvm.org/extra/clang-tidy/checks/performance/avoid-endl.html",
    "fixable": true
  },
  "content": {
    "introduction": "Checks for uses of \nstd::endl\n on streams and suggests using the newline\ncharacter \n'\\n'\n instead.\n\nRationale:\nUsing \nstd::endl\n on streams can be less efficient than using the newline\ncharacter \n'\\n'\n because \nstd::endl\n performs two operations: it writes a\nnewline character to the output stream and then flushes the stream buffer.\nWriting a single newline character using \n'\\n'\n does not trigger a flush,\nwhich can improve performance. In addition, flushing the stream buffer can\ncause additional overhead when working with streams that are buffered.\n\nExample:\n\nConsider the following code:\n\n#include\n \n<iostream>\n\n\n\nint\n \nmain\n()\n \n{\n\n\n  \nstd\n::\ncout\n \n<<\n \n\"Hello\"\n \n<<\n \nstd\n::\nendl\n;\n\n\n}\n\nWhich gets transformed into:\n\n#include\n \n<iostream>\n\n\n\nint\n \nmain\n()\n \n{\n\n\n  \nstd\n::\ncout\n \n<<\n \n\"Hello\"\n \n<<\n \n'\\n'\n;\n\n\n}\n\nThis code writes a single newline character to the \nstd::cout\n stream without\nflushing the stream buffer.\n\nAdditionally, it is important to note that the standard C++ streams (like\n\nstd::cerr\n, \nstd::wcerr\n, \nstd::clog\n and \nstd::wclog\n)\nalways flush after a write operation, unless \nstd::ios_base::sync_with_stdio\n\nis set to \nfalse\n. regardless of whether \nstd::endl\n or \n'\\n'\n is used.\nTherefore, using \n'\\n'\n with these streams will not\nresult in any performance gain, but it is still recommended to use\n\n'\\n'\n for consistency and readability.\n\nIf you do need to flush the stream buffer, you can use \nstd::flush\n\nexplicitly like this:\n\n#include\n \n<iostream>\n\n\n\nint\n \nmain\n()\n \n{\n\n\n  \nstd\n::\ncout\n \n<<\n \n\"Hello\n\\n\n\"\n \n<<\n \nstd\n::\nflush\n;\n\n\n}",
    "configurations": []
  }
}