{
  "name": "llvm-prefer-static-over-anonymous-namespace",
  "meta": {
    "url": "https://clang.llvm.org/extra/clang-tidy/checks/llvm/prefer-static-over-anonymous-namespace.html",
    "fixable": false
  },
  "content": {
    "introduction": "Finds function and variable declarations inside anonymous namespace and\nsuggests replacing them with \nstatic\n declarations.\n\nThe \nLLVM Coding Standards\n\nrecommend keeping anonymous namespaces as small as possible and only use them\nfor class declarations. For functions and variables the \nstatic\n specifier\nshould be preferred for restricting visibility.\n\nFor example non-compliant code:\n\nnamespace\n \n{\n\n\n\nclass\n \nStringSort\n \n{\n\n\npublic\n:\n\n\n  \nStringSort\n(...)\n\n\n  \nbool\n \noperator\n<\n(\nconst\n \nchar\n \n*\nRHS\n)\n \nconst\n;\n\n\n};\n\n\n\n// warning: place method definition outside of an anonymous namespace\n\n\nbool\n \nStringSort\n::\noperator\n<\n(\nconst\n \nchar\n \n*\nRHS\n)\n \nconst\n \n{}\n\n\n\n// warning: prefer using 'static' for restricting visibility\n\n\nvoid\n \nrunHelper\n()\n \n{}\n\n\n\n// warning: prefer using 'static' for restricting visibility\n\n\nint\n \nmyVariable\n \n=\n \n42\n;\n\n\n\n}\n\nShould become:\n\n// Small anonymous namespace for class declaration\n\n\nnamespace\n \n{\n\n\n\nclass\n \nStringSort\n \n{\n\n\npublic\n:\n\n\n  \nStringSort\n(...)\n\n\n  \nbool\n \noperator\n<\n(\nconst\n \nchar\n \n*\nRHS\n)\n \nconst\n;\n\n\n};\n\n\n\n}\n\n\n\n// placed method definition outside of the anonymous namespace\n\n\nbool\n \nStringSort\n::\noperator\n<\n(\nconst\n \nchar\n \n*\nRHS\n)\n \nconst\n \n{}\n\n\n\n// used 'static' instead of an anonymous namespace\n\n\nstatic\n \nvoid\n \nrunHelper\n()\n \n{}\n\n\n\n// used 'static' instead of an anonymous namespace\n\n\nstatic\n \nint\n \nmyVariable\n \n=\n \n42\n;\n\nOptions\nÂ¶\n\n\n\n\n\n\nAllowVariableDeclarations\nÂ¶\n\n\nWhen \ntrue\n, allow variable declarations to be in anonymous namespace.\nDefault value is \ntrue\n.\n\n\n\n\n\n\n\n\nAllowMemberFunctionsInClass\nÂ¶\n\n\nWhen \ntrue\n, only methods defined in anonymous namespace outside of the\ncorresponding class will be warned. Default value is \ntrue\n.",
    "configurations": []
  }
}