{
  "name": "abseil-duration-division",
  "meta": {
    "url": "https://clang.llvm.org/extra/clang-tidy/checks/abseil/duration-division.html",
    "fixable": true
  },
  "content": {
    "introduction": "absl::Duration\n arithmetic works like it does with integers. That means that\ndivision of two \nabsl::Duration\n objects returns an \nint64\n with any\nfractional component truncated toward 0.\nSee \nthis link\n\nfor more information on arithmetic with \nabsl::Duration\n.\n\nFor example:\n\nabsl\n::\nDuration\n \nd\n \n=\n \nabsl\n::\nSeconds\n(\n3.5\n);\n\n\nint64\n \nsec1\n \n=\n \nd\n \n/\n \nabsl\n::\nSeconds\n(\n1\n);\n     \n// Truncates toward 0.\n\n\nint64\n \nsec2\n \n=\n \nabsl\n::\nToInt64Seconds\n(\nd\n);\n  \n// Equivalent to division.\n\n\nassert\n(\nsec1\n \n==\n \n3\n \n&&\n \nsec2\n \n==\n \n3\n);\n\n\n\ndouble\n \ndsec\n \n=\n \nd\n \n/\n \nabsl\n::\nSeconds\n(\n1\n);\n  \n// WRONG: Still truncates toward 0.\n\n\nassert\n(\ndsec\n \n==\n \n3.0\n);\n\nIf you want floating-point division, you should use either the\n\nabsl::FDivDuration()\n function, or one of the unit conversion functions such\nas \nabsl::ToDoubleSeconds()\n. For example:\n\nabsl\n::\nDuration\n \nd\n \n=\n \nabsl\n::\nSeconds\n(\n3.5\n);\n\n\ndouble\n \ndsec1\n \n=\n \nabsl\n::\nFDivDuration\n(\nd\n,\n \nabsl\n::\nSeconds\n(\n1\n));\n  \n// GOOD: No truncation.\n\n\ndouble\n \ndsec2\n \n=\n \nabsl\n::\nToDoubleSeconds\n(\nd\n);\n                 \n// GOOD: No truncation.\n\n\nassert\n(\ndsec1\n \n==\n \n3.5\n \n&&\n \ndsec2\n \n==\n \n3.5\n);\n\nThis check looks for uses of \nabsl::Duration\n division that is done in a\nfloating-point context, and recommends the use of a function that returns a\nfloating-point value.",
    "configurations": []
  }
}