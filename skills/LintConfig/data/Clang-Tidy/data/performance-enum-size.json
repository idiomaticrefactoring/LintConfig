{
  "name": "performance-enum-size",
  "meta": {
    "url": "https://clang.llvm.org/extra/clang-tidy/checks/performance/enum-size.html",
    "fixable": false
  },
  "content": {
    "introduction": "Recommends the smallest possible underlying type for an \nenum\n or \nenum\n\nclass based on the range of its enumerators. Analyzes the values of the\nenumerators in an \nenum\n or \nenum\n class, including signed values, to\nrecommend the smallest possible underlying type that can represent all the\nvalues of the \nenum\n. The suggested underlying types are the integral types\n\nstd::uint8_t\n, \nstd::uint16_t\n, and \nstd::uint32_t\n for unsigned types,\nand \nstd::int8_t\n, \nstd::int16_t\n, and \nstd::int32_t\n for signed types.\nUsing the suggested underlying types can help reduce the memory footprint of\nthe program and improve performance in some cases.\n\nFor example:\n\n// BEFORE\n\n\nenum\n \nColor\n \n{\n\n\n    \nRED\n \n=\n \n-1\n,\n\n\n    \nGREEN\n \n=\n \n0\n,\n\n\n    \nBLUE\n \n=\n \n1\n\n\n};\n\n\n\nstd\n::\noptional\n<\nColor\n>\n \ncolor_opt\n;\n\nThe \nColor\n \nenum\n uses the default underlying type, which is \nint\n in this\ncase, and its enumerators have values of -1, 0, and 1. Additionally, the\n\nstd::optional<Color>\n object uses 8 bytes due to padding (platform\ndependent).\n\n// AFTER\n\n\nenum\n \nColor\n \n:\n \nstd\n::\nint8_t\n \n{\n\n\n    \nRED\n \n=\n \n-1\n,\n\n\n    \nGREEN\n \n=\n \n0\n,\n\n\n    \nBLUE\n \n=\n \n1\n\n\n}\n\n\n\nstd\n::\noptional\n<\nColor\n>\n \ncolor_opt\n;\n\nIn the revised version of the \nColor\n \nenum\n, the underlying type has been\nchanged to \nstd::int8_t\n. The enumerator \nRED\n has a value of -1, which can\nbe represented by a signed 8-bit integer.\n\nBy using a smaller underlying type, the memory footprint of the \nColor\n\n\nenum\n is reduced from 4 bytes to 1 byte. The revised version of the\n\nstd::optional<Color>\n object would only require 2 bytes (due to lack of\npadding), since it contains a single byte for the \nColor\n \nenum\n and a single\nbyte for the \nbool\n flag that indicates whether the optional value is set.\n\nReducing the memory footprint of an \nenum\n can have significant benefits in\nterms of memory usage and cache performance. However, itâs important to\nconsider the trade-offs and potential impact on code readability and\nmaintainability.\n\nEnums without enumerators (empty) are excluded from analysis.\n\nRequires C++11 or above.\nDoes not provide auto-fixes.\n\nOptions\nÂ¶\n\n\n\n\n\n\nEnumIgnoreList\nÂ¶\n\n\nOption is used to ignore certain enum types. It accepts a\nsemicolon-separated list of (fully qualified) enum type names or regular\nexpressions that match the enum type names. The default value is an empty\nstring, which means no enums will be ignored.",
    "configurations": []
  }
}