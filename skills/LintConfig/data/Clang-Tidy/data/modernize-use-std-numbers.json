{
  "name": "modernize-use-std-numbers",
  "meta": {
    "url": "https://clang.llvm.org/extra/clang-tidy/checks/modernize/use-std-numbers.html",
    "fixable": true
  },
  "content": {
    "introduction": "Finds constants and function calls to math functions that can be replaced\nwith C++20âs mathematical constants from the \nnumbers\n header and offers\nfix-it hints.\nDoes not match the use of variables with that value, and instead,\noffers a replacement for the definition of those variables.\nFunction calls that match the pattern of how the constant is calculated are\nmatched and replaced with the \nstd::numbers\n constant.\nThe use of macros gets replaced with the corresponding \nstd::numbers\n\nconstant, instead of changing the macro definition.\n\nThe following list of constants from the \nnumbers\n header are supported:\n\ne\n\n\nlog2e\n\n\nlog10e\n\n\npi\n\n\ninv_pi\n\n\ninv_sqrtpi\n\n\nln2\n\n\nln10\n\n\nsqrt2\n\n\nsqrt3\n\n\ninv_sqrt3\n\n\negamma\n\n\nphi\n\nThe list currently includes all constants as of C++20.\n\nThe replacements use the type of the matched constant and can remove explicit\ncasts, i.e., switching between \nstd::numbers::e\n,\n\nstd::numbers::e_v<float>\n and \nstd::numbers::e_v<long\n \ndouble>\n where\nappropriate.\n\ndouble\n \nsqrt\n(\ndouble\n);\n\n\ndouble\n \nlog2\n(\ndouble\n);\n\n\nvoid\n \nsink\n(\nauto\n&&\n)\n \n{}\n\n\nvoid\n \nfloatSink\n(\nfloat\n);\n\n\n\n#define MY_PI 3.1415926\n\n\n\nvoid\n \nfoo\n()\n \n{\n\n\n    \nconst\n \ndouble\n \nPi\n \n=\n \n3.141592653589\n;\n           \n// const double Pi = std::numbers::pi\n\n\n    \nconst\n \nauto\n \nUse\n \n=\n \nPi\n \n/\n \n2\n;\n                    \n// no match for Pi\n\n\n    \nstatic\n \nconstexpr\n \ndouble\n \nEuler\n \n=\n \n2.7182818\n;\n  \n// static constexpr double Euler = std::numbers::e;\n\n\n\n    \nlog2\n(\nexp\n(\n1\n));\n                               \n// std::numbers::log2e;\n\n\n    \nlog2\n(\nEuler\n);\n                                \n// std::numbers::log2e;\n\n\n    \n1\n \n/\n \nsqrt\n(\nMY_PI\n);\n                            \n// std::numbers::inv_sqrtpi;\n\n\n    \nsink\n(\nMY_PI\n);\n                                \n// sink(std::numbers::pi);\n\n\n    \nfloatSink\n(\nMY_PI\n);\n                           \n// floatSink(std::numbers::pi);\n\n\n    \nfloatSink\n(\nstatic_cast\n<\nfloat\n>\n(\nMY_PI\n));\n       \n// floatSink(std::numbers::pi_v<float>);\n\n\n}\n\nOptions\nÂ¶\n\n\n\n\n\n\nDiffThreshold\nÂ¶\n\n\nA floating point value that sets the detection threshold for when literals\nmatch a constant. A literal matches a constant if\n\nabs(literal\n \n-\n \nconstant)\n \n<\n \nDiffThreshold\n evaluates to \ntrue\n. Default\nis \n0.001\n.\n\n\n\n\n\n\n\n\nIncludeStyle\nÂ¶\n\n\nA string specifying which include-style is used, \nllvm\n or \ngoogle\n. Default\nis \nllvm\n.",
    "configurations": []
  }
}