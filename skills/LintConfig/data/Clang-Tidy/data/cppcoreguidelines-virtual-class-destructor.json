{
  "name": "cppcoreguidelines-virtual-class-destructor",
  "meta": {
    "url": "https://clang.llvm.org/extra/clang-tidy/checks/cppcoreguidelines/virtual-class-destructor.html",
    "fixable": true
  },
  "content": {
    "introduction": "Finds virtual classes whose destructor is neither public and virtual\nnor protected and non-virtual. A virtual classâs destructor should be specified\nin one of these ways to prevent undefined behavior.\n\nThis check implements\n\nC.35\n\nfrom the C++ Core Guidelines.\n\nNote that this check will diagnose a class with a virtual method regardless of\nwhether the class is used as a base class or not.\n\nFixes are available for user-declared and implicit destructors that are either\npublic and non-virtual or protected and virtual. No fixes are offered for\nprivate destructors. There, the decision whether to make them private and\nvirtual or protected and non-virtual depends on the use case and is thus left\nto the user.\n\nExample\nÂ¶\n\n\nFor example, the following classes/structs get flagged by the check since they\nviolate guideline \nC.35\n:\n\n\nstruct\n \nFoo\n \n{\n        \n// NOK, protected destructor should not be virtual\n\n\n  \nvirtual\n \nvoid\n \nf\n();\n\n\nprotected\n:\n\n\n  \nvirtual\n \n~\nFoo\n(){}\n\n\n};\n\n\n\nclass\n \nBar\n \n{\n         \n// NOK, public destructor should be virtual\n\n\n  \nvirtual\n \nvoid\n \nf\n();\n\n\npublic\n:\n\n\n  \n~\nBar\n(){}\n\n\n};\n\n\n\n\n\n\nThis would be rewritten to look like this:\n\n\nstruct\n \nFoo\n \n{\n        \n// OK, destructor is not virtual anymore\n\n\n  \nvirtual\n \nvoid\n \nf\n();\n\n\nprotected\n:\n\n\n  \n~\nFoo\n(){}\n\n\n};\n\n\n\nclass\n \nBar\n \n{\n         \n// OK, destructor is now virtual\n\n\n  \nvirtual\n \nvoid\n \nf\n();\n\n\npublic\n:\n\n\n  \nvirtual\n \n~\nBar\n(){}\n\n\n};",
    "configurations": []
  }
}