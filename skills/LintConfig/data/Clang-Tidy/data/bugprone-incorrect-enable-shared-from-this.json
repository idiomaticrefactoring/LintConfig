{
  "name": "bugprone-incorrect-enable-shared-from-this",
  "meta": {
    "url": "https://clang.llvm.org/extra/clang-tidy/checks/bugprone/incorrect-enable-shared-from-this.html",
    "fixable": true
  },
  "content": {
    "introduction": "Detect classes or structs that do not publicly inherit from\n\nstd::enable_shared_from_this\n, because unintended behavior will\notherwise occur when calling \nshared_from_this\n.\n\nConsider the following code:\n\n#include\n \n<memory>\n\n\n\n// private inheritance\n\n\nclass\n \nBadExample\n \n:\n \nstd\n::\nenable_shared_from_this\n<\nBadExample\n>\n \n{\n\n\n\n// ``shared_from_this``` unintended behaviour\n\n\n// `libstdc++` implementation returns uninitialized ``weak_ptr``\n\n\n    \npublic\n:\n\n\n    \nBadExample\n*\n \nfoo\n()\n \n{\n \nreturn\n \nshared_from_this\n().\nget\n();\n \n}\n\n\n    \nvoid\n \nbar\n()\n \n{\n \nreturn\n;\n \n}\n\n\n};\n\n\n\nvoid\n \nusing_not_public\n()\n \n{\n\n\n    \nauto\n \nbad_example\n \n=\n \nstd\n::\nmake_shared\n<\nBadExample\n>\n();\n\n\n    \nauto\n*\n \nb_ex\n \n=\n \nbad_example\n->\nfoo\n();\n\n\n    \nb_ex\n->\nbar\n();\n\n\n}\n\nUsing \nlibstdc++\n implementation, \nshared_from_this\n will throw\n\nstd::bad_weak_ptr\n. When \nusing_not_public()\n is called, this code will\ncrash without exception handling.",
    "configurations": []
  }
}