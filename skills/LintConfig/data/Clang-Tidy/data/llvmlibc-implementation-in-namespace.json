{
  "name": "llvmlibc-implementation-in-namespace",
  "meta": {
    "url": "https://clang.llvm.org/extra/clang-tidy/checks/llvmlibc/implementation-in-namespace.html",
    "fixable": false
  },
  "content": {
    "introduction": "Checks that all declarations in the llvm-libc implementation are within the\ncorrect namespace.\n\n// Implementation inside the LIBC_NAMESPACE_DECL namespace.\n\n\n// Correct if:\n\n\n// - LIBC_NAMESPACE_DECL is a macro\n\n\n// - LIBC_NAMESPACE_DECL expansion starts with `[[gnu::visibility(\"hidden\")]] __llvm_libc`\n\n\nnamespace\n \nLIBC_NAMESPACE_DECL\n \n{\n\n\n    \nvoid\n \nLLVM_LIBC_ENTRYPOINT\n(\nstrcpy\n)(\nchar\n \n*\ndest\n,\n \nconst\n \nchar\n \n*\nsrc\n)\n \n{}\n\n\n    \n// Namespaces within LIBC_NAMESPACE_DECL namespace are allowed.\n\n\n    \nnamespace\n \ninner\n \n{\n\n\n        \nint\n \nlocalVar\n \n=\n \n0\n;\n\n\n    \n}\n\n\n    \n// Functions with C linkage are allowed.\n\n\n    \nextern\n \n\"C\"\n \nvoid\n \nstr_fuzz\n()\n \n{}\n\n\n}\n\n\n\n// Incorrect: implementation not in the LIBC_NAMESPACE_DECL namespace.\n\n\nvoid\n \nLLVM_LIBC_ENTRYPOINT\n(\nstrcpy\n)(\nchar\n \n*\ndest\n,\n \nconst\n \nchar\n \n*\nsrc\n)\n \n{}\n\n\n\n// Incorrect: outer most namespace is not the LIBC_NAMESPACE_DECL macro.\n\n\nnamespace\n \nsomething_else\n \n{\n\n\n    \nvoid\n \nLLVM_LIBC_ENTRYPOINT\n(\nstrcpy\n)(\nchar\n \n*\ndest\n,\n \nconst\n \nchar\n \n*\nsrc\n)\n \n{}\n\n\n}\n\n\n\n// Incorrect: outer most namespace expansion does not start with `[[gnu::visibility(\"hidden\")]] __llvm_libc`.\n\n\n#define LIBC_NAMESPACE_DECL custom_namespace\n\n\nnamespace\n \nLIBC_NAMESPACE_DECL\n \n{\n\n\n    \nvoid\n \nLLVM_LIBC_ENTRYPOINT\n(\nstrcpy\n)(\nchar\n \n*\ndest\n,\n \nconst\n \nchar\n \n*\nsrc\n)\n \n{}\n\n\n}",
    "configurations": []
  }
}