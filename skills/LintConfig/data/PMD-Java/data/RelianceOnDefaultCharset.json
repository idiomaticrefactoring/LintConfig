{
    "name": "RelianceOnDefaultCharset",
    "category": "bestpractices",
    "summary": "Be sure to specify a character set for APIs that use the JVM's default character set to ensure\nstable encoding behavior between different JVMs, programs, and servers. Using the platform's\ndefault charset makes the code less portable and might lead to unexpected behavior when running\non different systems.\n\nAdditional, since Java 18, the default charset for these APIs is consistently UTF-8\n(see [JEP 400](https://openjdk.org/jeps/400)). While this reduces unexpected behavior\non different systems, it is still advised to explicitly specify a character set,\nespecially if UTF-8 is not the desired charset.",
    "message": "Specify a character set instead of relying on the default charset",
    "url": "${pmd.website.baseurl}/pmd_rules_java_bestpractices.html#relianceondefaultcharset",
    "since": "7.17.0",
    "priority": "3",
    "is_deprecated": false,
    "configuration": [],
    "examples": "public class Foo {\nvoid bad() throws IOException {\nnew InputStreamReader(inputStream);  // violation\nnew OutputStreamWriter(outputStream);  // violation\nURLEncoder.encode(\"test string\");  // violation (deprecated)\nnew PrintStream(outputStream);  // violation\nnew PrintWriter(\"output.txt\");  // violation\nnew Scanner(inputStream);  // violation\nnew Formatter();  // violation\n\"test\".getBytes();  // violation\nnew ByteArrayOutputStream().toString();  // violation\nnew FileReader(\"input.txt\");  // violation\nnew FileWriter(\"output.txt\");  // violation\n}\n\nvoid good() throws IOException {\nnew InputStreamReader(inputStream, StandardCharsets.UTF_8);  // ok\nnew OutputStreamWriter(outputStream, StandardCharsets.UTF_8);  // ok\nURLEncoder.encode(\"test string\", StandardCharsets.UTF_8);  // ok\nnew PrintStream(outputStream, true, StandardCharsets.UTF_8);  // ok\nnew PrintWriter(\"output.txt\", StandardCharsets.UTF_8);  // ok\nnew Scanner(inputStream, StandardCharsets.UTF_8);  // ok\nnew Formatter(Locale.US);  // ok\n\"test\".getBytes(StandardCharsets.UTF_8);  // ok\nnew ByteArrayOutputStream().toString(StandardCharsets.UTF_8);  // ok\nnew FileReader(\"input.txt\", StandardCharsets.UTF_8);  // ok\nnew FileWriter(\"output.txt\", StandardCharsets.UTF_8);  // ok\n}\n}"
}