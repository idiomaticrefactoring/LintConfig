{
    "name": "OverrideBothEqualsAndHashCodeOnComparable",
    "category": "errorprone",
    "summary": "Classes that implement `Comparable` should override both `equals()` and\n`hashCode()` if instances of these classes are used in collections. This is\nto ensure that the class's natural ordering is consistent with `equals()`.\nFailing to do so can lead to unexpected behavior in sets which then do not\nconform to the `Set` interface. While the `Set` interface relies on\n`equals()` to determine object equality, sorted sets like `TreeSet` use\n`compareTo()` instead. The same issue can arise when such objects are used\nas keys in sorted maps.\n\nNote 1: This rule is related to {% rule OverrideBothEqualsAndHashcode %}. It\nwill report missing `equals()` and/or `hashCode()` methods for classes only\nthat implement `Comparable`.\n\nNote 2: This rule reports records only, if either `equals()` or `hashCode()`\nhave been overridden, but not both. If a record uses the generated\nequals/hashCode methods, then the `compareTo()` implementation is only\nconsistent with `equals()` if all record components are considered.",
    "message": "When implementing Comparable both equals() and hashCode() should be overridden",
    "url": "${pmd.website.baseurl}/pmd_rules_java_errorprone.html#overridebothequalsandhashcodeoncomparable",
    "since": "7.17.0",
    "priority": "3",
    "is_deprecated": false,
    "configuration": [],
    "examples": "public class Bar implements Comparable<Bar> {  // poor - missing equals() and hashCode()\npublic int compareTo(Bar other) {\n// some comparison\n}\n}\n\npublic class Baz implements Comparable<Baz> {  // poor - missing hashCode()\npublic int compareTo(Baz other) {\n// some comparison\n}\npublic boolean equals(Object o) {\nif (o == null || getClass() != o.getClass()) {\nreturn false;\n}\nreturn compareTo((Baz) o) == 0;\n}\n}\n\npublic class Foo implements Comparable<Foo> {  // correct\npublic int compareTo(Foo other) {\n// some comparison\n}\npublic boolean equals(Object o) {\nif (o == null || getClass() != o.getClass()) {\nreturn false;\n}\nreturn compareTo((Foo) o) == 0;\n}\npublic int hashCode() {\n// return hash code\n}\n}"
}