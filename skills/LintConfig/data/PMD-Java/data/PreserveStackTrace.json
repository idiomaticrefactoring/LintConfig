{
    "name": "PreserveStackTrace",
    "category": "bestpractices",
    "summary": "Reports exceptions that are thrown from within a catch block, yet don't refer to the\nexception parameter declared by that catch block. The stack trace of the original\nexception could be lost, which makes the thrown exception less informative.\n\nTo preserve the stack trace, the original exception may be used as the cause of\nthe new exception, using `Throwable#initCause`, or passed as a constructor argument\nto the new exception. It may also be preserved using `Throwable#addSuppressed`.\nThe rule actually assumes that any method or constructor that takes the original\nexception as argument preserves the original stack trace.\n\nThe rule allows `InvocationTargetException` and `PrivilegedActionException` to be\nreplaced by their cause exception. The discarded part of the stack trace is in those\ncases only JDK-internal code, which is not very useful. The rule also ignores exceptions\nwhose name starts with `ignored`.",
    "message": "Thrown exception does not preserve the stack trace of exception ''{0}'' on all code paths",
    "url": "${pmd.website.baseurl}/pmd_rules_java_bestpractices.html#preservestacktrace",
    "since": "3.7",
    "priority": "3",
    "is_deprecated": false,
    "configuration": [],
    "examples": "public class Foo {\nvoid good() {\ntry{\nInteger.parseInt(\"a\");\n} catch (Exception e) {\nthrow new Exception(e); // Ok, this initializes the cause of the new exception\n}\ntry {\nInteger.parseInt(\"a\");\n} catch (Exception e) {\nthrow (IllegalStateException)new IllegalStateException().initCause(e); // second possibility to create exception chain.\n}\n}\nvoid wrong() {\ntry{\nInteger.parseInt(\"a\");\n} catch (Exception e) {\n// Violation: this only preserves the message and not the stack trace\nthrow new Exception(e.getMessage());\n}\n}\n}"
}