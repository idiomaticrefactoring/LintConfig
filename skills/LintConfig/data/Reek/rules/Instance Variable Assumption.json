{
    "Instance Variable Assumption": {
        "description": "Description\n\nIntroduction\n\nClasses should not assume that instance variables are set or present outside of the current class definition.\n\nGood:\n\n```ruby\nclass Foo\n  def initialize\n    @bar = :foo\n  end\n\ndef foo?\n    @bar == :foo\n  end\nend\n```\n\nGood as well:\n\n```ruby\nclass Foo\n  def foo?\n    bar == :foo\n  end\n\ndef bar\n    @bar ||= :foo\n  end\nend\n```\n\nBad:\n\n```ruby\nclass Foo\n  def go_foo!\n    @bar = :foo\n  end\n\ndef foo?\n    @bar == :foo\n  end\nend\n```\n\nExample\n\nRunning Reek on:\n\nruby\nclass Dummy\n  def test\n    @ivar\n  end\nend\n\nwould report:\n\nbash\n  [1]:InstanceVariableAssumption: Dummy assumes too much for instance variable @ivar\n\nNote that this example would trigger this smell warning as well:\n\n```ruby\nclass Parent\n  def initialize(omg)\n    @omg = omg\n  end\nend\n\nclass Child < Parent\n  def foo\n    @omg\n  end\nend\n```\n\nThe way to address the smell warning is that you should create an attr_reader to use @omg in the subclass and not access @omg directly like this:\n\n```ruby\nclass Parent\n  attr_reader :omg\n\ndef initialize(omg)\n    @omg = omg\n  end\nend\n\nclass Child < Parent\n  def foo\n    omg\n  end\nend\n```\n\nDirectly accessing instance variables is considered a smell because it breaks encapsulation and makes it harder to reason about code.\n\nIf you don't want to expose those methods as public API just make them private like this:\n\n```ruby\nclass Parent\n  def initialize(omg)\n    @omg = omg\n  end\n\nprivate\n  attr_reader :omg\nend\n\nclass Child < Parent\n  def foo\n    omg\n  end\nend\n```\n\nCurrent Support in Reek\n\nAn instance variable must:\n\nbe set in the constructor\nor be accessed through a method with lazy initialization / memoization.\n\nIf not, Instance Variable Assumption will be reported.\n\nUsing Instance Variable Assumption in a Rails context\n\nIn ActiveRecord it seems common to use callbacks like after_initialize to initialize instance variables as\noutlined here\nor here\ninstead of overriding the initialize method.\nIf an instance variable is initialized in such a callback Reek will report it correspondingly.\n\nThis would smell for instance:\n\nruby\nclass Sample < ApplicationRecord\n  after_initialize do\n    @my_var = false\n  end\nend\n\nSince Reek cannot reliably detect that is used in a Rails context we recommend to disable this detector\nfor \"app/models\" like this:\n\nyaml\ndirectories:\n  # Your other configuration....\n  \"app/models\":\n    InstanceVariableAssumption:\n      enabled: false",
        "option": "Instance Variable Assumption supports the Basic Smell Options."
    }
}